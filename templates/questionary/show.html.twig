
{% extends 'base.html.twig' %}

{% block body %}

    {% if hasControlAccess is defined and hasControlAccess %}
        {% include 'questionary/control_panel.html.twig' with {'questionary': questionary, 'deleteForm': deleteForm} %}
    {% endif %}

    <h1>Cuestionario</h1>

<div class="media" style="margin-top: 60px;">
    <div class="media-body">
        <div class="row">
            <div class="col-sm-10">
                <h3 class="media-heading"><strong>Nombre:</strong>  {{ questionary.name}} </h3>
            </div>


            <div class="col-sm-10">
                <h3 class="media-heading"><strong>ID:</strong>  {{ questionary.id}} </h3>
            </div>
            <div class="col-sm-10">
                <h5 class="media-heading"><strong>Descripción: </strong> {{ questionary.description}}</h5>
            </div>

            <div class="col-sm-10">
                <h5 class="media-heading"><strong>Tipo: </strong>{{ questionary.type}}</h5>
            </div>

            <div class="col-sm-10">
                    {% set myVal = 0 %}
                    {% for questionary in questionary.question %}
                        {% set myVal = myVal +1 %}

                    {% endfor %}

                <h5 class="media-heading"><strong>Numero de preguntas: </strong>{{ myVal }}</h5>


            <div class="row">
            <div class="col-sm-10">
                {% if questionary.type == "público" %}

                    <a class="btn btn-success" href="{{ path('gamesession.play', {id: questionary.id}) }}"> Crear juego </a>

                {% endif %}

                 <a class="btn btn-success" href="{{ path('gamesession.enterkey', {id: questionary.id}) }}"> Unirse a un juego </a>
            </div>


                <div class="col-sm-10">
                {% if is_granted('QUESTIONARY_OWNER', questionary) %}

                    {% if questionary.type == "privado" %}
                        <a class="btn btn-success" href="{{ path('gamesession.play', {id: questionary.id}) }}"> Crear juego </a>
                    {% endif %}

                </div>

                <div class="col-sm-10">
                <a class="btn btn-primary" href="{{ path('questionary.edit', {id: questionary.id}) }}"> Editar </a>
                <a class="btn btn-primary" href="{{ path('question.create', {id: questionary.id}) }}"> Añadir question </a>
                <a class="btn btn-primary" href="{{ path('questionary.export', {id: questionary.id}) }}"> Exportar Cuestionario </a>
                <a class="btn btn-primary" href="{{ path('questionary.import', {id: questionary.id}) }}"> Importar Cuestionario </a>


                    {{ form_start(deleteForm) }}
                {{ form_widget(deleteForm) }}

                <button type="submit" class="btn btn-default" onclick="return confirm('Are you sure?')">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    Delete
                </button>
                {{ form_end(deleteForm) }}

            </div>
            </div>

                    {% set Val = 0 %}
                    {% for question in question %}
                        {% set Val = Val +1 %}

                            <h5 class="media-heading"><strong>Pregunta {{ Val }}: </strong> <a href="{{ path('question.show', {id: question.id}) }}">

                                    {{ question.title}} </a

                            </h5>

                    {% endfor %}
        {% endif %}
            </div>
        </div>

                <div class="col-sm-10 text-right">
                <a class="btn btn-default" href="{{ path('questionary.list') }}">
                    <span class="glyphicon glyphicon-menu-left"aria-hidden="true"></span>
                    Volver al menú
                </a>
            </div>


</div>
{% endblock %}